<h1>Assigned Ports</h1>

<table class='table'>
<thead>
  <tr>
    <th>Hostname</th>
    <th>Tunnel Port</th>
    <th>Last Report Time</th>
    <th>Local IP(s)</th>
    <th>Outside IP</th>
    <th colspan=3>Options</th>
  </tr>
  </thead>
  <tbody>
  <% @clients.each do |c| %>
    <tr>
      <td><%= c.hostname %></td>
      <td><%= c.port %></td>
      <td><%= c.last_report %></td>
      <td><%= c.local_ip.chomp(',').gsub(',', ', ') rescue nil %></td>
      <td><%= c.outside_ip %></td>
      <td><%= link_to 'Release Port', c, data: { confirm: 'Are you sure? This will delete the client and any settings it has.' }, method: :delete %></td>
      <td><%= link_to 'Force Restart', restart_path(c), data: { confirm: 'Are you sure? This will kill any open SSH sessions.' } %></td>
      <td><%= link_to 'View', edit_client_path(c) %></td>
    </tr>
  <% end %>
  </tbody>
</table>

<h3>Generate SSH Config</h3>
<%= form_tag '/configs', method: :get do %>
  <label>User to SSH as: 
  <%= text_field_tag 'user' %></label>
  <%= submit_tag 'Submit' %>
<% end %>
